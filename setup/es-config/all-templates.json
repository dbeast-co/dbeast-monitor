PUT _ilm/policy/dbeast-tsds-30d
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_age": "7d",
            "max_docs": 200000000,
            "max_primary_shard_size": "50gb"
          },
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}

PUT _ilm/policy/dbeast-ds-30d
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_age": "7d",
            "max_docs": 200000000,
            "max_primary_shard_size": "50gb"
          },
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}

PUT _ilm/policy/dbeast-index-30d
{
  "policy": {
    "phases": {
      "hot": {
        "actions": {
          "rollover": {
            "max_age": "7d",
            "max_docs": 200000000,
            "max_primary_shard_size": "50gb"
          },
          "forcemerge": {
            "max_num_segments": 1
          }
        }
      },
      "delete": {
        "min_age": "30d",
        "actions": {
          "delete": {}
        }
      }
    }
  }
}

PUT _component_template/dbeast-mon-default-settings-component
{
  "template": {
    "settings": {
      "index": {
        "codec": "best_compression",
        "refresh_interval": "30s",
        "number_of_shards": "1",
        "auto_expand_replicas": "0-1"
      }
    }
  }
}

PUT _component_template/dbeast-mon-tsds-es-index-stats-mapping-component
{
  "template": {
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        },
        "elasticsearch": {
          "properties": {
            "bulk_avg_size_in_bytes": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "bulk_avg_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "bulk_total_operations": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "bulk_total_size_in_bytes": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "bulk_total_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "cluster": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "keyword",
                  "time_series_dimension": true
                }
              }
            },
            "completion_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "creation_date_string": {
              "type": "date"
            },
            "docs_deleted": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "fielddata_evictions": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "fielddata_memory_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "flush_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "flush_total_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "get_exists_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "get_exists_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "get_missing_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "get_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "index": {
              "type": "object",
              "properties": {
                "created": {
                  "type": "date"
                },
                "index_pattern": {
                  "type": "keyword",
                  "time_series_dimension": true
                },
                "name": {
                  "type": "keyword",
                  "time_series_dimension": true
                },
                "primaries": {
                  "type": "object",
                  "properties": {
                    "docs": {
                      "type": "object",
                      "properties": {
                        "ingest_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "get": {
                      "type": "object",
                      "properties": {
                        "current": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "missing_time": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "indexing": {
                      "type": "object",
                      "properties": {
                        "delete_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "delete_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "failed_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_current": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_failed": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_last_period": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_latency": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_time_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "merges": {
                      "type": "object",
                      "properties": {
                        "current": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "refresh": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "request_cache": {
                      "type": "object",
                      "properties": {
                        "evictions": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "search": {
                      "type": "object",
                      "properties": {
                        "fetch_last_period": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "fetch_latency": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "fetch_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "fetch_time_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "fetch_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_last_period": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_latency": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_time_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "store": {
                      "type": "object",
                      "properties": {
                        "ingest_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "size_in_bytes": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    }
                  }
                },
                "shards": {
                  "type": "object",
                  "properties": {
                    "primaries": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "replica": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "total": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    }
                  }
                },
                "status": {
                  "type": "keyword",
                  "ignore_above": 256
                },
                "health": {
                  "type": "keyword",
                  "ignore_above": 256
                },
                "summary": {
                  "type": "object",
                  "properties": {
                    "primaries": {
                      "type": "object",
                      "properties": {
                        "bulk": {
                          "type": "object",
                          "properties": {
                            "avg_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "avg_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_operations": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "completion": {
                          "type": "object",
                          "properties": {
                            "size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "docs": {
                          "type": "object",
                          "properties": {
                            "count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "deleted": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "ingest_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "fielddata": {
                          "type": "object",
                          "properties": {
                            "evictions": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "global_ordinals": {
                              "type": "object",
                              "properties": {
                                "build_time_in_millis": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                }
                              }
                            },
                            "memory_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "flush": {
                          "type": "object",
                          "properties": {
                            "periodic": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "get": {
                          "type": "object",
                          "properties": {
                            "current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "exists_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "exists_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "missing_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "missing_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "indexing": {
                          "type": "object",
                          "properties": {
                            "delete_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "delete_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "delete_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_failed": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "is_throttled": {
                              "type": "boolean"
                            },
                            "noop_update_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "throttle_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "write_load": {
                              "type": "double",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "merges": {
                          "type": "object",
                          "properties": {
                            "current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "current_docs": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "current_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_auto_throttle_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_docs": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_stopped_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_throttled_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "query_cache": {
                          "type": "object",
                          "properties": {
                            "cache_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "cache_size": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "evictions": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "hit_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "memory_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "miss_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "recovery": {
                          "type": "object",
                          "properties": {
                            "current_as_source": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "current_as_target": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "throttle_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "refresh": {
                          "type": "object",
                          "properties": {
                            "external_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "external_total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "listeners": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "request_cache": {
                          "type": "object",
                          "properties": {
                            "evictions": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "hit_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "memory_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "miss_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "search": {
                          "type": "object",
                          "properties": {
                            "fetch_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "fetch_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "fetch_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "open_contexts": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "query_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "query_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "query_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "query_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "scroll_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "scroll_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "scroll_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "suggest_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "suggest_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "suggest_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "segments": {
                          "type": "object",
                          "properties": {
                            "count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "doc_values_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "file_sizes": {
                              "type": "object"
                            },
                            "fixed_bit_set_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_writer_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "max_unsafe_auto_id_timestamp": {
                              "type": "date"
                            },
                            "memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "norms_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "points_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "stored_fields_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "term_vectors_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "terms_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "version_map_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "shard_stats": {
                          "type": "object",
                          "properties": {
                            "total_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "store": {
                          "type": "object",
                          "properties": {
                            "reserved_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_data_set_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "translog": {
                          "type": "object",
                          "properties": {
                            "earliest_last_modified_age": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "operations": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "uncommitted_operations": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "uncommitted_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "warmer": {
                          "type": "object",
                          "properties": {
                            "current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        }
                      }
                    },
                    "total": {
                      "type": "object",
                      "properties": {
                        "bulk": {
                          "type": "object",
                          "properties": {
                            "avg_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "avg_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_operations": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "completion": {
                          "type": "object",
                          "properties": {
                            "size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "docs": {
                          "type": "object",
                          "properties": {
                            "count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "deleted": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "ingest_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "fielddata": {
                          "type": "object",
                          "properties": {
                            "evictions": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "global_ordinals": {
                              "type": "object",
                              "properties": {
                                "build_time_in_millis": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                }
                              }
                            },
                            "memory_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "flush": {
                          "type": "object",
                          "properties": {
                            "periodic": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "get": {
                          "type": "object",
                          "properties": {
                            "current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "exists_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "exists_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "missing_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "missing_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "indexing": {
                          "type": "object",
                          "properties": {
                            "delete_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "delete_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "delete_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_failed": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "is_throttled": {
                              "type": "boolean"
                            },
                            "noop_update_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "throttle_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "write_load": {
                              "type": "double"
                            }
                          }
                        },
                        "merges": {
                          "type": "object",
                          "properties": {
                            "current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "current_docs": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "current_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_auto_throttle_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_docs": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_stopped_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_throttled_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "query_cache": {
                          "type": "object",
                          "properties": {
                            "cache_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "cache_size": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "evictions": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "hit_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "memory_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "miss_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "recovery": {
                          "type": "object",
                          "properties": {
                            "current_as_source": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "current_as_target": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "throttle_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "refresh": {
                          "type": "object",
                          "properties": {
                            "external_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "external_total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "listeners": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "request_cache": {
                          "type": "object",
                          "properties": {
                            "evictions": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "hit_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "memory_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "miss_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "search": {
                          "type": "object",
                          "properties": {
                            "fetch_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "fetch_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "fetch_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "open_contexts": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "query_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "query_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "query_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "query_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "scroll_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "scroll_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "scroll_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "suggest_current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "suggest_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "suggest_total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "segments": {
                          "type": "object",
                          "properties": {
                            "count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "doc_values_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "fixed_bit_set_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "index_writer_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "max_unsafe_auto_id_timestamp": {
                              "type": "date"
                            },
                            "memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "norms_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "points_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "stored_fields_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "term_vectors_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "terms_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "version_map_memory_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "shard_stats": {
                          "type": "object",
                          "properties": {
                            "total_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "store": {
                          "type": "object",
                          "properties": {
                            "reserved_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_data_set_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "translog": {
                          "type": "object",
                          "properties": {
                            "earliest_last_modified_age": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "operations": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "uncommitted_operations": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "uncommitted_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "warmer": {
                          "type": "object",
                          "properties": {
                            "current": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_time_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "total": {
                  "type": "object",
                  "properties": {
                    "docs": {
                      "type": "object",
                      "properties": {
                        "count": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "ingest_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "get": {
                      "type": "object",
                      "properties": {
                        "current": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "missing_time": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "indexing": {
                      "type": "object",
                      "properties": {
                        "delete_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "delete_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "failed_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_current": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_failed": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_last_period": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_latency": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_time_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "index_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "merges": {
                      "type": "object",
                      "properties": {
                        "current": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "refresh": {
                      "type": "object",
                      "properties": {
                        "total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "request_cache": {
                      "type": "object",
                      "properties": {
                        "evictions": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "search": {
                      "type": "object",
                      "properties": {
                        "fetch_last_period": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "fetch_latency": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "fetch_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "fetch_time_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "fetch_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_last_period": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_latency": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_time_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "query_total": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "store": {
                      "type": "object",
                      "properties": {
                        "ingest_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "size_in_bytes": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    }
                  }
                },
                "uuid": {
                  "type": "keyword",
                  "time_series_dimension": true
                }
              }
            },
            "indexing_delete_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "indexing_delete_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "memory_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "merges_current_docs": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "merges_current_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "merges_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "merges_total_docs": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "merges_total_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "merges_total_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_bulk_avg_size_in_bytes": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_bulk_avg_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_bulk_total_operations": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_bulk_total_size_in_bytes": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_bulk_total_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_completion_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_fielddata_evictions": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_fielddata_memory_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_flush_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_flush_total_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_get_exists_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_get_exists_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_get_missing_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_get_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_indexing_delete_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_indexing_delete_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_memory_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_merges_current_docs": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_merges_current_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_merges_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_merges_total_docs": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_merges_total_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_merges_total_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_query_cache_evictions": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_query_cache_memory_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_refresh_external_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_refresh_external_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_refresh_listeners": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_refresh_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_request_cache_hit_count": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_request_cache_memory_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_request_cache_miss_count": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_search_fetch_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_search_open_contexts": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_search_query_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_search_scroll_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_search_scroll_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_search_scroll_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_segments_count": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_segments_fixed_bitset_memory": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_segments_index_writer_memory": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_segments_memory": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_segments_version_map_memory": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_suggest_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_suggest_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_suggest_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_warmer_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_warmer_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "pri_warmer_total_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "query_cache_evictions": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "query_cache_memory_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "refresh_external_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "refresh_external_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "refresh_listeners": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "refresh_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "rep": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "request_cache_hit_count": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "request_cache_memory_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "request_cache_miss_count": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "sample_date": {
              "type": "date"
            },
            "search_fetch_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "search_open_contexts": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "search_query_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "search_scroll_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "search_scroll_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "search_scroll_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "search_throttled": {
              "type": "boolean"
            },
            "segments_count": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "segments_fixed_bitset_memory": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "segments_index_writer_memory": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "segments_memory": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "segments_version_map_memory": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "suggest_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "suggest_time": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "suggest_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "tags": {
              "type": "keyword",
              "ignore_above": 256
            },
            "warmer_current": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "warmer_total": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "warmer_total_time": {
              "type": "long",
              "time_series_metric": "gauge"
            }
          }
        },
        "event": {
          "type": "object",
          "properties": {
            "dataset": {
              "type": "keyword",
              "time_series_dimension": true
            },
            "module": {
              "type": "keyword",
              "time_series_dimension": true
            }
          }
        },
        "sample_date": {
          "type": "date"
        }
      }
    }
  },
  "_meta": {
    "description": "default mappings for the monitoring ecs indices"
  }
}

PUT _index_template/dbeast-mon-tsds-es-index-stats-historical-template
{
  "index_patterns": [
    "dbeast-mon-tsds-es-index-stats"
  ],
  "template": {
    "settings": {
      "index": {
        "lifecycle": {
          "name": "dbeast-tsds-30d"
        },
        "mode": "time_series",
        "routing_path": [
          "elasticsearch.cluster.id"
        ]
      }
    },
    "aliases": {
      "dbeast-mon-es-index-stats": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-es-index-stats-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "data_stream": {
    "hidden": false
  },
  "priority": 1,
  "_meta": {
    "description": "This template used for the index monitoring"
  }
}

PUT _index_template/dbeast-mon-index-es-index-stats-status-template
{
  "index_patterns": [
    "dbeast-mon-index-es-index-stats-status"
  ],
  "template": {
    "aliases": {
      "dbeast-mon-es-index-stats-status": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-es-index-stats-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "priority": 1,
  "_meta": {
    "description": "This template used for the index monitoring"
  }
}

PUT _component_template/dbeast-mon-tsds-es-shards-stats-mapping-component
{
  "template": {
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        },
        "date_diff": {
          "type": "long",
          "time_series_metric": "gauge"
        },
        "elasticsearch": {
          "type": "object",
          "properties": {
            "cluster": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "keyword",
                  "time_series_dimension": true
                }
              }
            },
            "index": {
              "type": "object",
              "properties": {
                "index_pattern": {
                  "type": "keyword",
                  "time_series_dimension": true
                },
                "name": {
                  "type": "keyword",
                  "time_series_dimension": true
                }
              }
            },
            "node": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "keyword",
                  "time_series_dimension": true
                },
                "ip": {
                  "type": "ip"
                },
                "name": {
                  "type": "keyword",
                  "time_series_dimension": true
                }
              }
            },
            "shard": {
              "type": "object",
              "properties": {
                "docs": {
                  "type": "object",
                  "properties": {
                    "count": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "ingest_rate": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    }
                  }
                },
                "get": {
                  "type": "object",
                  "properties": {
                    "current": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "exists_time": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "exists_total": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "missing_time": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "missing_total": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "time": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "total": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    }
                  }
                },
                "indexing": {
                  "type": "object",
                  "properties": {
                    "delete_current": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "delete_rate": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "delete_time": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "delete_total": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "index_current": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "index_failed": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "index_failed_rate": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "index_last_period": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "index_latency": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "index_rate": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "index_time": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "index_total": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    }
                  }
                },
                "number": {
                  "type": "long",
                  "time_series_dimension": true
                },
                "primary": {
                  "type": "boolean"
                },
                "query_cache": {
                  "type": "object",
                  "properties": {
                    "evictions": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "memory_size": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    }
                  }
                },
                "search": {
                  "type": "object",
                  "properties": {
                    "fetch_current": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "fetch_last_period": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "fetch_latency": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "fetch_rate": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "fetch_time": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "fetch_total": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "open_contexts": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "query_current": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "query_last_period": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "query_latency": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "query_rate": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "query_time": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "query_total": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "scroll_current": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "scroll_time": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "scroll_total": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    }
                  }
                },
                "state": {
                  "type": "keyword",
                  "ignore_above": 256
                },
                "store": {
                  "type": "object",
                  "properties": {
                    "ingest_rate": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "size_in_bytes": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    }
                  }
                },
                "unassigned": {
                  "type": "object",
                  "properties": {
                    "at": {
                      "type": "date"
                    },
                    "for": {
                      "type": "long",
                      "time_series_metric": "gauge"
                    },
                    "reason": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            }
          }
        },
        "error": {
          "type": "object",
          "properties": {
            "message": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        },
        "event": {
          "type": "object",
          "properties": {
            "dataset": {
              "type": "keyword",
              "time_series_dimension": true
            },
            "duration": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "module": {
              "type": "keyword",
              "time_series_dimension": true
            }
          }
        },
        "host": {
          "type": "object",
          "properties": {
            "hostname": {
              "type": "keyword",
              "time_series_dimension": true
            }
          }
        },
        "http": {
          "type": "object",
          "properties": {
            "request": {
              "type": "object",
              "properties": {
                "method": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        },
        "sample_date": {
          "type": "date"
        },
        "tags": {
          "type": "keyword",
          "ignore_above": 256
        },
        "url": {
          "type": "object",
          "properties": {
            "full": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        }
      }
    }
  },
  "_meta": {
    "description": "The default mappings for the shards monitoring"
  }
}

PUT _index_template/dbeast-mon-tsds-es-shards-stats-historical-template
{
  "index_patterns": [
    "dbeast-mon-tsds-es-shards-stats"
  ],
  "template": {
    "settings": {
      "index": {
        "lifecycle": {
          "name": "dbeast-tsds-30d"
        },
        "mode": "time_series",
        "routing_path": [
          "elasticsearch.cluster.id"
        ]
      }
    },
    "aliases": {
      "dbeast-mon-es-shards-stats": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-es-shards-stats-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "data_stream": {
    "hidden": false
  },
  "priority": 1,
  "_meta": {
    "description": "This template used for the shards monitoring"
  }
}

PUT _index_template/dbeast-mon-index-es-shards-stats-status-template
{
  "index_patterns": [
    "dbeast-mon-index-es-shards-stats-status"
  ],
  "template": {
    "aliases": {
      "dbeast-mon-es-shards-stats-status": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-es-shards-stats-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "_meta": {
    "description": "This template used for the shards monitoring"
  }
}

PUT _component_template/dbeast-mon-tsds-es-thread_pools-mapping-component
{
  "template": {
    "settings": {},
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        },
        "host": {
          "properties": {
            "hostname": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "elasticsearch": {
          "properties": {
            "node": {
              "properties": {
                "stats": {
                  "properties": {
                    "thread_pool": {
                      "properties": {
                        "completed_rate": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        },
                        "largest": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "queue_size": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        },
                        "max": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        },
                        "rejected": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "rejected_rate": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        },
                        "pool_size": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        },
                        "active": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        },
                        "completed": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "type": {
                          "type": "keyword",
                          "time_series_dimension": true
                        },
                        "core": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        },
                        "size": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        },
                        "name": {
                          "type": "keyword",
                          "time_series_dimension": true
                        },
                        "@version": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        },
                        "keep_alive": {
                          "type": "keyword",
                          "ignore_above": 256
                        },
                        "queue": {
                          "type": "integer",
                          "time_series_metric": "gauge"
                        }
                      }
                    }
                  }
                },
                "port": {
                  "type": "integer",
                  "time_series_metric": "gauge"
                },
                "ip": {
                  "type": "ip"
                },
                "name": {
                  "type": "keyword",
                  "time_series_dimension": true
                },
                "pid": {
                  "type": "integer",
                  "time_series_metric": "gauge"
                },
                "id": {
                  "type": "keyword",
                  "ignore_above": 256
                },
                "ephemeral_node_id": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "cluster": {
              "properties": {
                "id": {
                  "type": "keyword",
                  "time_series_dimension": true
                }
              }
            }
          }
        },
        "event": {
          "properties": {
            "module": {
              "type": "keyword",
              "time_series_dimension": true
            },
            "dataset": {
              "type": "keyword",
              "time_series_dimension": true
            }
          }
        }
      }
    },
    "aliases": {}
  }
}

PUT _index_template/dbeast-mon-tsds-es-thread_pools-historical-template
{
  "index_patterns": [
    "dbeast-mon-tsds-es-thread_pools"
  ],
  "template": {
    "settings": {
      "index": {
        "lifecycle": {
          "name": "dbeast-tsds-30d"
        },
        "mode": "time_series",
        "routing_path": [
          "elasticsearch.cluster.id"
        ]
      }
    },
    "aliases": {
      "dbeast-mon-es-thread_pools": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-es-thread_pools-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "data_stream": {
    "hidden": false
  },
  "priority": 1,
  "_meta": {
    "description": "This template used for the Elasticsearch thread pools metrics"
  }
}

PUT _index_template/dbeast-mon-index-es-thread_pools-status-template
{
  "index_patterns": [
    "dbeast-mon-index-es-thread_pools-status"
  ],
  "template": {
    "aliases": {
      "dbeast-mon-es-thread_pools-status": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-es-thread_pools-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "priority": 1,
  "_meta": {
    "description": "This template used for the Elasticsearch thread pools metrics"
  }
}

PUT _component_template/dbeast-mon-tsds-logstash-metrics-mapping-component
{
  "template": {
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        },
        "@version": {
          "type": "long",
          "time_series_metric": "gauge"
        },
        "elasticsearch": {
          "type": "object",
          "properties": {
            "cluster": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "keyword",
                  "time_series_dimension": true
                }
              }
            }
          }
        },
        "event": {
          "type": "object",
          "properties": {
            "dataset": {
              "type": "keyword",
              "time_series_dimension": true
            },
            "module": {
              "type": "keyword",
              "time_series_dimension": true
            }
          }
        },
        "host": {
          "type": "object",
          "properties": {
            "hostname": {
              "type": "keyword",
              "time_series_dimension": true
            }
          }
        },
        "logstash": {
          "type": "object",
          "properties": {
            "elasticsearch": {
              "type": "object",
              "properties": {
                "cluster": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                }
              }
            },
            "log": {
              "type": "object",
              "properties": {
                "pipeline_name": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "node": {
              "type": "object",
              "properties": {
                "stats": {
                  "type": "object",
                  "properties": {
                    "events": {
                      "type": "object",
                      "properties": {
                        "duration_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "filtered": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "filtered_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "in": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "in_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "latency": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "out": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "out_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "queue_push_duration_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "jvm": {
                      "type": "object",
                      "properties": {
                        "gc": {
                          "type": "object",
                          "properties": {
                            "collectors": {
                              "type": "object",
                              "properties": {
                                "old": {
                                  "type": "object",
                                  "properties": {
                                    "collection_count": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "collection_time_in_millis": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "young": {
                                  "type": "object",
                                  "properties": {
                                    "collection_count": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "collection_time_in_millis": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "mem": {
                          "type": "object",
                          "properties": {
                            "heap_committed_in_bytes": {
                              "type": "date"
                            },
                            "heap_max_in_bytes": {
                              "type": "date"
                            },
                            "heap_used_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "heap_used_percent": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "non_heap_committed_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "non_heap_used_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "pools": {
                              "type": "object",
                              "properties": {
                                "old": {
                                  "type": "object",
                                  "properties": {
                                    "committed_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "max_in_bytes": {
                                      "type": "date"
                                    },
                                    "peak_max_in_bytes": {
                                      "type": "date"
                                    },
                                    "peak_used_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "used_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "survivor": {
                                  "type": "object",
                                  "properties": {
                                    "committed_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "max_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "peak_max_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "peak_used_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "used_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "young": {
                                  "type": "object",
                                  "properties": {
                                    "committed_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "max_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "peak_max_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "peak_used_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "used_in_bytes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "threads": {
                          "type": "object",
                          "properties": {
                            "count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "peak_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "uptime_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "logstash": {
                      "type": "object",
                      "properties": {
                        "ephemeral_id": {
                          "type": "keyword",
                          "time_series_dimension": true
                        },
                        "host": {
                          "type": "keyword",
                          "time_series_dimension": true
                        },
                        "http_address": {
                          "ignore_above": 256,
                          "type": "keyword"
                        },
                        "id": {
                          "type": "keyword",
                          "time_series_dimension": true
                        },
                        "name": {
                          "type": "keyword",
                          "time_series_dimension": true
                        },
                        "snapshot": {
                          "type": "boolean"
                        },
                        "status": {
                          "ignore_above": 256,
                          "type": "keyword"
                        },
                        "version": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "os": {
                      "type": "object"
                    },
                    "pipeline": {
                      "type": "object",
                      "properties": {
                        "ephemeral_id": {
                          "ignore_above": 256,
                          "type": "keyword"
                        },
                        "ephemeral_id_key": {
                          "ignore_above": 256,
                          "type": "keyword"
                        },
                        "events": {
                          "type": "object",
                          "properties": {
                            "duration_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "failures_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "filtered": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "filtered_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "in": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "in_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "out": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "out_rate": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "queue_push_duration_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "filters_failures": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "flow": {
                          "dynamic": false,
                          "type": "object"
                        },
                        "hash": {
                          "ignore_above": 256,
                          "type": "keyword"
                        },
                        "id": {
                          "type": "keyword",
                          "time_series_dimension": true
                        },
                        "plugins": {
                          "type": "object",
                          "properties": {
                            "codecs": {
                              "properties": {
                                "decode": {
                                  "type": "object",
                                  "properties": {
                                    "duration_in_millis": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "out": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "writes_in": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "encode": {
                                  "type": "object",
                                  "properties": {
                                    "duration_in_millis": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "writes_in": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "id": {
                                  "ignore_above": 256,
                                  "type": "keyword"
                                },
                                "name": {
                                  "ignore_above": 256,
                                  "type": "keyword"
                                }
                              }
                            },
                            "filters": {
                              "properties": {
                                "aggregate_maps": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "code_errors": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "events": {
                                  "type": "object",
                                  "properties": {
                                    "duration_in_millis": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "in": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "in_rate": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "latency": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "out": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "out_rate": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "failures": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "failures_rate": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "flow": {
                                  "dynamic": false,
                                  "type": "object"
                                },
                                "id": {
                                  "eager_global_ordinals": false,
                                  "norms": false,
                                  "index": true,
                                  "store": false,
                                  "type": "keyword",
                                  "index_options": "docs",
                                  "split_queries_on_whitespace": false,
                                  "doc_values": true
                                },
                                "matches": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "name": {
                                  "ignore_above": 256,
                                  "type": "keyword"
                                },
                                "patterns_per_field": {
                                  "type": "object",
                                  "properties": {
                                    "[logstash][exception][reason]": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "[logstash][message]": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "message": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                }
                              }
                            },
                            "inputs": {
                              "type": "object",
                              "properties": {
                                "address": {
                                  "ignore_above": 256,
                                  "type": "keyword"
                                },
                                "current_connections": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "events": {
                                  "type": "object",
                                  "properties": {
                                    "out": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "queue_push_duration_in_millis": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "flow": {
                                  "dynamic": false,
                                  "type": "object"
                                },
                                "id": {
                                  "ignore_above": 256,
                                  "type": "keyword"
                                },
                                "name": {
                                  "ignore_above": 256,
                                  "type": "keyword"
                                },
                                "peak_connections": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                }
                              }
                            },
                            "outputs": {
                              "properties": {
                                "bulk_requests": {
                                  "type": "object",
                                  "properties": {
                                    "failures": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "responses": {
                                      "type": "object",
                                      "properties": {
                                        "200": {
                                          "type": "long",
                                          "time_series_metric": "gauge"
                                        }
                                      }
                                    },
                                    "successes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "with_errors": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "documents": {
                                  "type": "object",
                                  "properties": {
                                    "dlq_routed": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "successes": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "events": {
                                  "type": "object",
                                  "properties": {
                                    "duration_in_millis": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "in": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    },
                                    "out": {
                                      "type": "long",
                                      "time_series_metric": "gauge"
                                    }
                                  }
                                },
                                "flow": {
                                  "dynamic": false,
                                  "type": "object"
                                },
                                "id": {
                                  "ignore_above": 256,
                                  "type": "keyword"
                                },
                                "name": {
                                  "ignore_above": 256,
                                  "type": "keyword"
                                },
                                "send_to": {
                                  "ignore_above": 256,
                                  "type": "keyword"
                                }
                              }
                            }
                          }
                        },
                        "queue": {
                          "type": "object",
                          "properties": {
                            "events_count": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "max_queue_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "queue_size_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "type": {
                              "ignore_above": 256,
                              "type": "keyword"
                            }
                          }
                        },
                        "reloads": {
                          "type": "object",
                          "properties": {
                            "failures": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "last_success_timestamp": {
                              "ignore_above": 256,
                              "type": "keyword"
                            },
                            "successes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "filters_failures_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "process": {
                      "type": "object",
                      "properties": {
                        "cpu": {
                          "type": "object",
                          "properties": {
                            "load_average": {
                              "type": "object",
                              "properties": {
                                "15m": {
                                  "type": "double"
                                },
                                "1m": {
                                  "type": "double"
                                },
                                "5m": {
                                  "type": "double"
                                }
                              }
                            },
                            "percent": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "total_in_millis": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "max_file_descriptors": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "mem": {
                          "type": "object",
                          "properties": {
                            "total_virtual_in_bytes": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            }
                          }
                        },
                        "open_file_descriptors": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "peak_open_file_descriptors": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "queue": {
                      "type": "object",
                      "properties": {
                        "events_count": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    },
                    "reloads": {
                      "type": "object",
                      "properties": {
                        "failures": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "successes": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "metricset": {
          "type": "object",
          "properties": {
            "name": {
              "type": "keyword",
              "time_series_dimension": true
            }
          }
        },
        "pipeline": {
          "type": "object",
          "properties": {
            "batch_delay": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "batch_size": {
              "type": "long",
              "time_series_metric": "gauge"
            },
            "workers": {
              "type": "long",
              "time_series_metric": "gauge"
            }
          }
        },
        "sample_date": {
          "type": "date"
        },
        "tags": {
          "ignore_above": 256,
          "type": "keyword"
        }
      }
    }
  },
  "_meta": {
    "description": "The default mappings for the Logstash metrics"
  }
}

PUT _index_template/dbeast-mon-tsds-logstash-metrics-historical-template
{
  "index_patterns": [
    "dbeast-mon-tsds-logstash-metrics"
  ],
  "template": {
    "settings": {
      "index": {
        "lifecycle": {
          "name": "dbeast-tsds-30d"
        },
        "mode": "time_series",
        "routing_path": [
          "elasticsearch.cluster.id"
        ]
      }
    },
    "aliases": {
      "dbeast-mon-logstash-metrics": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-logstash-metrics-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "data_stream": {
    "hidden": false
  },
  "priority": 1,
  "_meta": {
    "description": "This template used for the Logstash metrics"
  }
}

PUT _index_template/dbeast-mon-index-logstash-metrics-status-template
{
  "index_patterns": [
    "dbeast-mon-index-logstash-metrics-status"
  ],
  "template": {
    "aliases": {
      "dbeast-mon-logstash-metrics-status": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-logstash-metrics-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "priority": 1,
  "_meta": {
    "description": "This template used for the Logstash metrics"
  }
}

PUT _component_template/dbeast-mon-ds-logstash-logs-mapping-component
{
  "template": {
    "settings": {
      "index": {
        "analysis": {
          "normalizer": {
            "lowercase_normalizer": {
              "filter": [
                "lowercase",
                "asciifolding"
              ],
              "type": "custom",
              "char_filter": []
            }
          }
        }
      }
    },
    "mappings": {
      "dynamic_templates": [],
      "properties": {
        "logstash": {
          "type": "object",
          "properties": {
            "exception": {
              "type": "object",
              "properties": {
                "mapping_exception_field": {
                  "ignore_above": 256,
                  "type": "keyword"
                },
                "reason": {
                  "ignore_above": 256,
                  "type": "keyword"
                },
                "type": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "node": {
              "type": "object",
              "properties": {
                "stats": {
                  "type": "object",
                  "properties": {
                    "pipeline": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    },
                    "logstash": {
                      "type": "object",
                      "properties": {
                        "host": {
                          "ignore_above": 256,
                          "type": "keyword"
                        }
                      }
                    }
                  }
                }
              }
            },
            "elasticsearch": {
              "type": "object",
              "properties": {
                "cluster": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "ignore_above": 256,
                      "type": "keyword"
                    }
                  }
                }
              }
            },
            "log": {
              "type": "object",
              "properties": {
                "pipeline_listener_port": {
                  "type": "integer"
                },
                "pipeline_action": {
                  "ignore_above": 256,
                  "type": "keyword"
                },
                "module": {
                  "ignore_above": 256,
                  "type": "keyword"
                },
                "pipeline_generated_id": {
                  "ignore_above": 256,
                  "type": "keyword"
                },
                "pipeline_id": {
                  "ignore_above": 256,
                  "type": "keyword"
                },
                "type": {
                  "ignore_above": 256,
                  "type": "keyword"
                },
                "pipeline_name": {
                  "ignore_above": 256,
                  "type": "keyword"
                },
                "pipeline_listener_host": {
                  "type": "ip"
                },
                "timestamp": {
                  "type": "date"
                }
              }
            },
            "message": {
              "type": "text"
            }
          }
        },
        "@timestamp": {
          "type": "date"
        },
        "elasticsearch": {
          "type": "object",
          "properties": {
            "cluster": {
              "type": "object",
              "properties": {
                "id": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            }
          }
        },
        "log": {
          "type": "object",
          "properties": {
            "file": {
              "type": "object",
              "properties": {
                "path": {
                  "ignore_above": 256,
                  "type": "keyword"
                }
              }
            },
            "level": {
              "ignore_above": 256,
              "type": "keyword"
            }
          }
        },
        "@version": {
          "type": "integer"
        },
        "host": {
          "type": "object",
          "properties": {
            "hostname": {
              "ignore_above": 256,
              "type": "keyword"
            },
            "name": {
              "ignore_above": 256,
              "type": "keyword"
            }
          }
        },
        "event": {
          "type": "object",
          "properties": {
            "original": {
              "type": "text"
            },
            "module": {
              "ignore_above": 256,
              "type": "keyword"
            },
            "dataset": {
              "ignore_above": 256,
              "type": "keyword"
            }
          }
        }
      }
    }
  },
  "_meta": {
    "description": "The default mappings for the Logstash logs"
  }
}

PUT _index_template/dbeast-mon-ds-logstash-logs-historical-template
{
  "index_patterns": [
    "dbeast-mon-ds-logstash-logs"
  ],
  "template": {
    "settings": {
      "index": {
        "lifecycle": {
          "name": "dbeast-ds-30d"
        }
      }
    },
    "aliases": {
      "dbeast-mon-logstash-logs": {}
    }
  },
  "composed_of": [
    "dbeast-mon-ds-logstash-logs-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "data_stream": {
    "hidden": false
  },
  "priority": 1,
  "_meta": {
    "description": "This template used for the Logstash logs"
  }
}

PUT _index_template/dbeast-mon-index-logstash-logs-pipelines-ports-status-template
{
  "index_patterns": [
    "dbeast-mon-index-logstash-logs-pipelines-ports-status"
  ],
  "template": {
    "aliases": {
      "dbeast-mon-logstash-logs-pipelines-ports-status": {}
    }
  },
  "composed_of": [
    "dbeast-mon-ds-logstash-logs-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "priority": 1,
  "_meta": {
    "description": "This template used for the Logstash port usage status"
  }
}

PUT _component_template/dbeast-mon-index-es-tasks-mapping-component
{
  "template": {
    "settings": {},
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        },
        "@version": {
          "type": "integer"
        },
        "elasticsearch": {
          "properties": {
            "cluster": {
              "properties": {
                "id": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "task": {
              "properties": {
                "action": {
                  "type": "keyword",
                  "ignore_above": 256
                },
                "description": {
                  "type": "text"
                },
                "ip": {
                  "type": "ip"
                },
                "node": {
                  "type": "keyword",
                  "ignore_above": 256
                },
                "parent_task_id": {
                  "type": "keyword",
                  "ignore_above": 256
                },
                "query": {
                  "properties": {
                    "aggregations": {
                      "type": "text"
                    },
                    "aggregations_levels": {
                      "type": "integer"
                    },
                    "query": {
                      "type": "text"
                    },
                    "query_uid": {
                      "type": "keyword",
                      "ignore_above": 256
                    },
                    "sort": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                },
                "request": {
                  "properties": {
                    "bulk_size": {
                      "type": "integer"
                    },
                    "index_list": {
                      "type": "keyword",
                      "ignore_above": 256
                    },
                    "index_number": {
                      "type": "integer"
                    },
                    "index_pattern": {
                      "type": "keyword"
                    },
                    "query": {
                      "type": "text"
                    },
                    "search_type": {
                      "type": "keyword",
                      "ignore_above": 256
                    },
                    "shard_number": {
                      "type": "integer"
                    }
                  }
                },
                "running_time": {
                  "type": "long"
                },
                "start_time": {
                  "type": "date"
                },
                "task_id": {
                  "type": "keyword",
                  "ignore_above": 256
                },
                "timestamp": {
                  "type": "keyword",
                  "ignore_above": 256
                },
                "type": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        },
        "error": {
          "properties": {
            "message": {
              "type": "text"
            }
          }
        },
        "event": {
          "properties": {
            "dataset": {
              "type": "keyword",
              "ignore_above": 256
            },
            "duration": {
              "type": "long"
            },
            "module": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "host": {
          "properties": {
            "hostname": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "http": {
          "properties": {
            "request": {
              "properties": {
                "method": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        },
        "metricset": {
          "properties": {
            "name": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "tags": {
          "type": "keyword",
          "ignore_above": 256
        },
        "url": {
          "properties": {
            "full": {
              "type": "text",
              "fields": {
                "keyword": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            }
          }
        }
      }
    },
    "aliases": {}
  }
}

PUT _index_template/dbeast-mon-index-es-tasks-historical-template
{
  "index_patterns": [
    "dbeast-mon-index-es-tasks-*"
  ],
  "template": {
    "settings": {
      "index": {
        "lifecycle": {
          "name": "dbeast-index-30d",
          "rollover_alias": "dbeast-mon-index-es-tasks"
        }
      }
    },
    "aliases": {
      "dbeast-mon-es-tasks": {}
    }
  },
  "composed_of": [
    "dbeast-mon-index-es-tasks-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "_meta": {
    "description": "This template used for the Elasticsearch tasks"
  }
}

PUT _component_template/dbeast-mon-tsds-es-ingest_pipelines-mapping-component
{
  "template": {
    "settings": {},
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        },
        "@version": {
          "type": "integer"
        },
        "elasticsearch": {
          "properties": {
            "cluster": {
              "properties": {
                "id": {
                  "type": "keyword",
                  "time_series_dimension": true
                }
              }
            },
            "node": {
              "properties": {
                "id": {
                  "type": "keyword",
                  "time_series_dimension": true
                },
                "name": {
                  "type": "keyword",
                  "time_series_dimension": true
                },
                "stats": {
                  "properties": {
                    "ingest": {
                      "properties": {
                        "enrich": {
                          "properties": {
                            "cache_stats": {
                              "properties": {
                                "count": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "evictions": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "hits": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "hits_last_period": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "hits_rate": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "misses": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                }
                              }
                            },
                            "coordinator_stats": {
                              "properties": {
                                "executed_searches_last_period": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "executed_searches_rate": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "executed_searches_total": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "queue_size": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "remote_requests_current": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "remote_requests_total": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "ingest_pipeline": {
                      "properties": {
                        "count": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "current": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "failed": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "failed_rate": {
                          "type": "long"
                        },
                        "id": {
                          "type": "keyword",
                          "time_series_dimension": true
                        },
                        "in_rate": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        },
                        "last_failed": {
                          "type": "long"
                        },
                        "last_processed": {
                          "type": "long"
                        },
                        "processors": {
                          "properties": {
                            "id": {
                              "type": "keyword",
                              "ignore_above": 256
                            },
                            "number_in_pipeline": {
                              "type": "long",
                              "time_series_metric": "gauge"
                            },
                            "stats": {
                              "properties": {
                                "count": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "current": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "failed": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                },
                                "failed_rate": {
                                  "type": "long"
                                },
                                "in_rate": {
                                  "type": "long"
                                },
                                "last_failed": {
                                  "type": "long"
                                },
                                "last_processed": {
                                  "type": "long"
                                },
                                "last_processing_time": {
                                  "type": "long"
                                },
                                "latency": {
                                  "type": "long"
                                },
                                "time_in_millis": {
                                  "type": "long",
                                  "time_series_metric": "gauge"
                                }
                              }
                            },
                            "type": {
                              "type": "keyword",
                              "ignore_above": 256
                            }
                          }
                        },
                        "processors_failures": {
                          "type": "long"
                        },
                        "time_in_millis": {
                          "type": "long",
                          "time_series_metric": "gauge"
                        }
                      }
                    }
                  }
                }
              }
            },
            "number_of_ingest_nodes": {
              "type": "long"
            }
          }
        },
        "event": {
          "properties": {
            "dataset": {
              "type": "keyword",
              "time_series_dimension": true
            },
            "module": {
              "type": "keyword",
              "time_series_dimension": true
            }
          }
        },
        "metricset": {
          "properties": {
            "name": {
              "type": "keyword",
              "time_series_dimension": true
            }
          }
        },
        "sample_date": {
          "type": "date"
        },
        "tags": {
          "type": "keyword",
          "time_series_dimension": true
        }
      }
    }
  }
}

PUT _index_template/dbeast-mon-tsds-ingest_pipelines-historical-template
{
  "index_patterns": [
    "dbeast-mon-tsds-es-ingest_pipelines"
  ],
  "template": {
    "settings": {
      "index": {
        "lifecycle": {
          "name": "dbeast-tsds-30d"
        },
        "mode": "time_series",
        "routing_path": [
          "elasticsearch.cluster.id"
        ]
      }
    },
    "aliases": {
      "dbeast-mon-es-ingest_pipelines": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-es-ingest_pipelines-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "data_stream": {
    "hidden": false
  },
  "priority": 1,
  "_meta": {
    "description": "This template used for the Elasticsearch pipelines metrics"
  }
}

PUT _index_template/dbeast-mon-index-es-ingest_pipelines-status-template
{
  "index_patterns": [
    "dbeast-mon-index-es-ingest_pipelines-status"
  ],
  "template": {
    "aliases": {
      "dbeast-mon-es-ingest_pipelines-status": {}
    }
  },
  "composed_of": [
    "dbeast-mon-tsds-es-ingest_pipelines-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "priority": 1,
  "_meta": {
    "description": "This template used for the Elasticsearch pipelines metrics"
  }
}

PUT _component_template/dbeast-mon-index-corrupted-data-mapping-component
{
  "template": {
    "settings": {},
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        },
        "elasticsearch": {
          "properties": {
            "error": {
              "properties": {
                "message": {
                  "type": "text"
                }
              }
            },
            "host": {
              "properties": {
                "hostname": {
                  "type": "keyword",
                  "ignore_above": 256
                }
              }
            },
            "http": {
              "properties": {
                "request": {
                  "properties": {
                    "method": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            },
            "node": {
              "properties": {
                "stats": {
                  "properties": {
                    "thread_pool": {
                      "properties": {
                        "@version": {
                          "type": "keyword",
                          "ignore_above": 256
                        },
                        "error": {
                          "properties": {
                            "message": {
                              "type": "text"
                            }
                          }
                        },
                        "host": {
                          "properties": {
                            "hostname": {
                              "type": "keyword",
                              "ignore_above": 256
                            }
                          }
                        },
                        "http": {
                          "properties": {
                            "request": {
                              "properties": {
                                "method": {
                                  "type": "keyword",
                                  "ignore_above": 256
                                }
                              }
                            }
                          }
                        },
                        "tags": {
                          "type": "text",
                          "fields": {
                            "keyword": {
                              "type": "keyword",
                              "ignore_above": 256
                            }
                          }
                        },
                        "url": {
                          "properties": {
                            "full": {
                              "type": "text",
                              "fields": {
                                "keyword": {
                                  "type": "keyword",
                                  "ignore_above": 256
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "tags": {
              "type": "keyword",
              "ignore_above": 256
            },
            "url": {
              "properties": {
                "full": {
                  "type": "text",
                  "fields": {
                    "keyword": {
                      "type": "keyword",
                      "ignore_above": 256
                    }
                  }
                }
              }
            }
          }
        },
        "event": {
          "properties": {
            "duration": {
              "type": "long"
            }
          }
        }
      }
    }
  }
}

PUT _index_template/dbeast-mon-index-corrupted-data-historical-template
{
  "index_patterns": [
    "dbeast-mon-index-corrupted-data-*"
  ],
  "template": {
    "settings": {
      "index": {
        "lifecycle": {
          "name": "dbeast-index-30d",
          "rollover_alias": "dbeast-mon-index-corrupted-data"
        }
      }
    },
    "aliases": {
      "dbeast-mon-corrupted-data": {}
    }
  },
  "composed_of": [
    "dbeast-mon-index-corrupted-data-mapping-component",
    "dbeast-mon-default-settings-component"
  ],
  "priority": 1,
  "_meta": {
    "description": "This template used for the corrupted data, that can't be sent to TSDS"
  }
}

PUT %3Cdbeast-mon-index-es-tasks-%7Bnow%2Fd%7D-000001%3E
{
"aliases": {
"dbeast-mon-index-es-tasks": {
"is_write_index": true
}
}
}
PUT %3Cdbeast-mon-index-corrupted-data-%7Bnow%2Fd%7D-000001%3E
{
"aliases": {
"dbeast-mon-index-corrupted-data": {
"is_write_index": true
}
}
}